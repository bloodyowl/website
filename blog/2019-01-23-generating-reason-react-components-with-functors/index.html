<!DOCTYPE html><html lang="en"><head><title data-react-helmet="true">Generating ReasonReact components with functors</title><meta data-react-helmet="true" name="description" value="Front-end developer and designer. ReasonML, ReasonReact, ReactJS."/><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="w75-P-0ywXWkyZvYPbkSM3VSM2hny25UrfeiWJt3B1k" name="google-site-verification"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="website" property="og:type"/><meta data-react-helmet="true" content="https://bloodyowl.io/public/assets/images/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://bloodyowl.io/public/assets/images/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="@bloodyowl" name="twitter:site"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><link data-react-helmet="true" href="/public/assets/images/favicon.png" rel="shortcut icon"/><link data-react-helmet="true" href="https://bloodyowl.io/blog/2019-01-23-generating-reason-react-components-with-functors/" rel="canonical"/><style data-react-helmet="true" >@import url("//hello.myfonts.net/count/3cae5f")</style><script data-react-helmet="true" >window.beOpAsyncInit = function() {
        BeOpSDK.init({
          account: "556e1d2772a6b60100844051"
        });
        BeOpSDK.watch();
      };</script><script data-react-helmet="true" async="true" src="https://widget.beop.io/sdk.js"></script><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss 13ah45v 1apzu5i 956oyo">@-webkit-keyframes animation-13ah45v{50%{opacity:0.5;}}@keyframes animation-13ah45v{50%{opacity:0.5;}}@font-face{font-family:HelveticaNowDisplay;src:url("/public/assets/webfonts/regular.woff2"),url("/public/assets/webfonts/regular.woff");font-style:normal;font-weight:400;font-display:swap;}@font-face{font-family:HelveticaNowDisplay;src:url("/public/assets/webfonts/bold.woff2"),url("/public/assets/webfonts/bold.woff");font-style:normal;font-weight:700;font-display:swap;}body{background-color:#65E197;font-family:HelveticaNowDisplay,"Helvetica Neue",Helvetica,Arial,sans-serif;overflow-x:hidden;padding:10px;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background-color:#fff;border-radius:20px;width:100%;max-width:1200px;padding-top:10px;overflow:hidden;margin:0 auto;box-shadow:0 20px 20px -10px rgba(0, 0, 0, 0.3);}html{color:#111;font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#abb2bf;background:#282c34;}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic;}.hljs-doctag,.hljs-keyword,.hljs-formula{color:#c678dd;}.hljs-section,.hljs-name,.hljs-selector-tag,.hljs-deletion,.hljs-subst{color:#e06c75;}.hljs-literal{color:#56b6c2;}.hljs-string,.hljs-regexp,.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string{color:#98c379;}.hljs-attr,.hljs-variable,.hljs-template-variable,.hljs-type,.hljs-selector-class,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-number{color:#d19a66;}.hljs-symbol,.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-title{color:#61aeee;}.hljs-built_in,.hljs-title.class_,.hljs-class .hljs-title{color:#e6c07b;}.hljs-emphasis{font-style:italic;}.hljs-strong{font-weight:bold;}.hljs-link{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="rpcss 1lm8k0f">.rpcss-1lm8k0f{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-1lm8k0f"><style data-emotion="rpcss 1rwzoz3">.rpcss-1rwzoz3{background-color:#FFF;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:18px;padding:0 env(safe-area-inset-right) 0 env(safe-area-inset-left);}</style><div class="rpcss-1rwzoz3"><style data-emotion="rpcss qq6n5i">.rpcss-qq6n5i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:#111;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-qq6n5i" href="/"><style data-emotion="rpcss 19jaiin">.rpcss-19jaiin{margin-right:10px;margin-left:20px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}</style><svg class="rpcss-19jaiin" height="64" width="64" viewBox="0 0 228 228" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m113.9 0 .1.3 37 9.7 20.7-8.5 14.2 21.9h-.2.1l-11.3 14a51 51 0 0 1 7.3 8.4c2 3.1 3.4 6.2 4.3 9.4l.1.5a245 245 0 0 1-3 21.4l.8.8c3.6 3.8 6.6 7.6 9 11.4 2.6 4.1 4.6 8.3 5.9 12.4l.1.5-3 10.9c-.9 17.1-4.2 34-9.9 50.6-6 17.3-14.4 33.6-24.8 48.7l-.8 1-16-1.5-12.7 14.5H95.5l-.6-.7a231 231 0 0 1-12.2-13.8l-16.1 1.6a207.1 207.1 0 0 1-25.7-49.8c-5.5-16-8.7-32.5-9.7-49.3l-.1-1.3-3.1-10.9a83 83 0 0 1 6.1-12.9c2.4-3.8 5.4-7.6 9-11.4l.7-.8A285 285 0 0 1 41 57.3l-.1-1.5c.8-3.4 2.3-6.7 4.4-10 2.1-3 4.6-6 7.3-8.5l-11.3-14 14-21.8L76.1 10l37-9.7V.1h.9l-.1-.1Z" fill="#65E197" fill-opacity=".1"></path><path d="m114 1.1 37 9.9 20.7-8.5 14.2 21.9-11.4 14a51 51 0 0 1 7.3 8.4c1.7 2.6 2.9 5.1 3.8 7.7l.2.6.2.6.1.5.1.5c-.7 7-1.6 13.7-2.8 20.4 0 1.3.3 1.5.5 1.7 3.7 3.9 6.7 7.7 9.1 11.5 2.2 3.4 4 6.9 5.2 10.3l.2.7.3.8.2.6.1.5-3 10.9c-.9 17.1-4.2 34-9.9 50.6-5.6 16-13.2 31.2-22.5 45.3l-.8 1.2-.8 1.1-.7 1.1-.8 1-16-1.5c-2.4 2.8-6.3 7.4-12 13.7l-.4.5-36.6.3-.6-.7-7.8-8.5-1.2-1.5-1.3-1.5-2-2.3-16 1.6a207 207 0 0 1-25.7-49.8c-5-14.6-8.2-29.8-9.4-45.2l-.1-1.4-.1-1.3-.1-1.4-.1-1.3-3.1-10.9a83 83 0 0 1 6.1-12.9c2.4-3.8 5.4-7.6 9-11.4-.2-4.6-.6-8.1-1-11.5l-.6-4.5-.2-1.5v-1l-.3-2.1-.1-1.5a32.5 32.5 0 0 1 8.5-15.2l.6-.7.7-.7 1.9-2-11.3-13.9 14-21.8L76.1 11l37-9.7.8-.2Zm68.3 82.1a312.7 312.7 0 0 1-.8 4 256 256 0 0 1-17.7 53.2 229.4 229.4 0 0 1-45.4 65.8l-.9.9-.9.9-1.1 1-14.6 14h29.4l1.6-1.7 1-1.1 1-1.1c13.4-15 25-31.6 34.6-49.3a317.9 317.9 0 0 0 25-61l.4-1.6.5-1.7.5-2-.5-1.3-.3-.8-.3-.8a49 49 0 0 0-10.2-16l-1.3-1.4Zm-137.6 0a66.3 66.3 0 0 0-7.1 9.3 37.1 37.1 0 0 0-5.1 11.9c6.3 22.7 15 44.6 26.2 65.3 9.4 17.6 20.9 34 34.2 48.8l1 1.2 2.4 2.6 14.3-14.2-2.4-2.4-.9-1-.9-.9a229.4 229.4 0 0 1-43-63.4 267.1 267.1 0 0 1-18.7-57.3Zm-10.7 43 8 27.8.5 2 .4 1.4A196.6 196.6 0 0 0 66.3 207l.8 1.2 1.5 2.2 11.2-1.1-3.3-4.2-1-1.4-1-1.4a263.5 263.5 0 0 1-27-45.7l-.9-2-.9-1.9L34 126.3Zm160.2-4.8-6.6 17-.8 1.8a305.3 305.3 0 0 1-14.7 31.4c-6.1 11.4-13 22-20.3 32l-1 1.4-3.3 4.2 11.2 1 1.5-2.2.7-1.1.9-1.3a201.5 201.5 0 0 0 22.7-48.5l.5-1.6 9.2-34Zm-13.5-57.6a168.3 168.3 0 0 1-20.9 21l-1.1.9-1.2 1-.5.3-3.4 2.6-1.1.8-1.1.9-1.2.8c-9.4 6.8-19.6 13-30.6 18.3l-1.4.7-2.5 1.2v91.1l4.4-4.6.9-1 .8-1a225.3 225.3 0 0 0 38.5-58.1 250.8 250.8 0 0 0 19.9-66l.2-1.5.3-7.4ZM45.5 62.5l1.3 8.2.2 1.4.2 1.5A256.5 256.5 0 0 0 67 138.7a225 225 0 0 0 39.3 59l1 1 4.3 4.7v-91l-2.5-1.3-1.4-.7-1.4-.7c-11.8-5.9-23-12.9-33.6-20.9l-1.2-.9-1.2-.9-.5-.4-1.2-1-1.1-.9-1-.9a168.6 168.6 0 0 1-21-21.3Zm97.2 15.1-23.3 28.9 10.7-6 1.4-1 1.5-.8c5.3-3.2 10.5-6.6 15.5-10.2l1.4-1 3.6-2.7-10.8-7.2Zm-58.1 0-10.8 7.1 3.6 2.7 1.4 1 1.3 1c5 3.5 10.2 6.9 15.6 10l1.5.9 10.7 6-23.3-28.7Zm31.1-13.9v41L137.9 77l-22.2-13.3Zm-4.1 0L89.3 77.1l22.3 27.5V63.7Zm60.5-22.2-14.4 17.7-.1 22.2 4.3-3.9 1-.8 1-1A165.5 165.5 0 0 0 182 56a21.5 21.5 0 0 0-.4-1c-.7-2-1.6-3.9-3-5.9-1.6-2.5-3.8-5-6.4-7.5Zm-117 0c-2.6 2.5-4.8 5-6.4 7.5a28 28 0 0 0-3.4 7 80.9 80.9 0 0 0 .7.9c5.7 7.2 11.8 13.8 18.2 19.7l1 .9 4.4 4-.1-22.3-14.4-17.7Zm18.4 22.7.1 15.8 8.3-5.4-8.4-10.4Zm80 0-8.3 10.4 8.3 5.4V64.2ZM51.6 30.8l17.8 21.8 6.8 8.5L86.6 74l20.8-12.5-55.8-30.7Zm123.9 0-55.8 30.7L140.4 74l10.5-13 6.7-8.2 17.9-22Zm-62-25.5L46 23.1l67.5 37.3 67.6-37.3-67.6-17.8Zm56.7 2.1-12.8 5.3 19.5 5.3-6.7-10.6Zm-113.3 0-6.7 10.5 19.5-5.2-12.8-5.3Z" fill="#000" fill-rule="nonzero"></path><path d="M43.1 89.8c4.1 17.8 10 35.2 17.6 51.8 11 24.2 26 46.2 44.5 65.3l1 1-9.8 10a251.3 251.3 0 0 1-35-49.6 317 317 0 0 1-26-64.4 41 41 0 0 1 7.7-14Zm135.1 76.6a198.4 198.4 0 0 1-19.7 38.8l-.8 1.2-.5.7-4-.4 1-1.3c7.1-9.7 13.7-20 19.7-30.8l.8-1.6 3.1-5.9.4-.7ZM118.7 69l14.7 8.8-14.7 18.4V69Zm24.6 12.6 5 3.3c-5.2 3.8-10.4 7.3-15.7 10.5l-.8.5 11.5-14.3Zm29-35.6a33.4 33.4 0 0 1 6.2 9.3c-5.8 7.5-12 14-18.6 20l.7-.6.1-14.4L172.3 46Zm-8.8-5.1-8.2 10-6.7 8.2-8.9 11-14-8.5L163.5 41ZM58 11l2.3 1-3.5 1 1.2-2Zm119.1 61.2-.2 1.5a247.5 247.5 0 0 1-19.4 63.7 222.3 222.3 0 0 1-39.7 59.2l.8-.9v-81.6l.8-.4a213.8 213.8 0 0 0 34.8-21l1.1-.8 3.4-2.6.6-.5 1.2-1c5.8-4.8 11.4-10 16.6-15.6Z" fill="#65E197"></path><path d="m73.5 64.2 8.4 10.4-8.3 5.4zM153.5 64.2V80l-8.3-5.4z" fill="#FFF"></path></g></svg><style data-emotion="rpcss 1jwoke4">.rpcss-1jwoke4{padding:20px 20px 23px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;line-height:1.2;}</style><div aria-level="1" class="rpcss-1jwoke4" role="heading"><style data-emotion="rpcss a6owh4">.rpcss-a6owh4{font-weight:bold;margin-right:10px;white-space:nowrap;}</style><div class="rpcss-a6owh4">Matthias Le Brun</div><div>@bloodyowl</div></div></a><style data-emotion="rpcss u4p24i">.rpcss-u4p24i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="rpcss-u4p24i"><style data-emotion="rpcss 1xib33k">.rpcss-1xib33k{padding:20px 20px 23px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-text-decoration:none;text-decoration:none;color:#111;text-align:center;scroll-snap-align:start;font-size:20px;font-weight:bold;}</style><a class="rpcss-1xib33k" href="/blog/">→ Blog</a></div></div><style data-emotion="rpcss n63pef">.rpcss-n63pef{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-n63pef"><style data-emotion="rpcss n0fndg">.rpcss-n0fndg{max-width:640px;margin:20px auto;padding:0 10px;width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-n0fndg"><style data-emotion="rpcss apovzu">.rpcss-apovzu{margin:0;font-size:48px;margin-top:50px;margin-bottom:10px;line-height:1.15;}</style><h1 class="rpcss-apovzu">Generating ReasonReact components with functors</h1><style data-emotion="rpcss 12xm3b2">.rpcss-12xm3b2{font-size:14px;opacity:0.5;margin-bottom:50px;}</style><div class="rpcss-12xm3b2">2019/01/23</div><style data-emotion="rpcss 1qdwpun">.rpcss-1qdwpun{margin-top:40px;font-size:20px;line-height:1.5;}.rpcss-1qdwpun a{color:#135EFF;}.rpcss-1qdwpun a:hover{color:#13A3FF;}.rpcss-1qdwpun img{max-width:100%;height:auto;opacity:0;-webkit-transition:300ms ease-out opacity;transition:300ms ease-out opacity;}.rpcss-1qdwpun pre{padding:10px 20px;overflow-x:auto;-webkit-overflow-scrolling:touch;font-size:16px;border-radius:8px;}.rpcss-1qdwpun code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:0.85em;line-height:1;}.rpcss-1qdwpun table{width:100%;text-align:center;}.rpcss-1qdwpun table thead th{background-color:#FFF;padding:10px 0;}.rpcss-1qdwpun blockquote{opacity:0.6;border-left:4px solid #111;margin:0;padding:0 20px;}.rpcss-1qdwpun hr{border-color:rgba(0, 0, 0, 0.1);}</style><div class="rpcss-1qdwpun" role="article"><p>In JavaScript, React components can either be function or classes. This makes it easy to create functions that return components (factories if you will).</p>
<p>With ReasonReact though, if you want to use them with JSX, components need to be modules containing a <code>make</code> function, which is a much more static construct.</p>
<p>Fortunately, Reason (through OCaml) has a great feature which is called functors. Think of it as a <strong>module function</strong>: it <strong>takes a module as parameter and returns a module</strong>.</p>
<h2>The syntax</h2>
<pre><code class="hljs language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">Make</span> = (<span class="hljs-module-identifier">Param</span>: <span class="hljs-module-identifier">ParamType</span>) =&gt; {
  <span class="hljs-comment">/* contents of the module to return */</span>
};
</code></pre>
<p>Let's define a <code>ParamType</code> first:</p>
<pre><code class="hljs language-reason"><span class="hljs-keyword">module</span> <span class="hljs-keyword">type</span> <span class="hljs-module-identifier">ParamType</span> = {
  <span class="hljs-keyword">type</span> t;
  <span class="hljs-keyword">let</span> name: string;
  <span class="hljs-keyword">let</span> render: t =&gt; <span class="hljs-module-identifier">React</span>.reactElement;
};
</code></pre>
<p>Now, let's create our functor. The following example is very short and now really useful, its goal is simply to show the syntax. Where functors shine is with more complicated components, where you just want to write a simple configuration to generate a component (e.g. big virtualised, paginated lists, sortables etc.)</p>
<pre><code class="hljs language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">Make</span> = (<span class="hljs-module-identifier">Param</span>: <span class="hljs-module-identifier">ParamType</span>) =&gt; {
  <span class="hljs-keyword">type</span> state = {
    value: <span class="hljs-module-identifier">Param</span>.t,
  };
  <span class="hljs-keyword">let</span> component = <span class="hljs-module-identifier">React</span>.reducerComponent(<span class="hljs-string">&quot;Demo&quot;</span> <span class="hljs-operator">++</span> <span class="hljs-module-identifier">Param</span>.name);
  <span class="hljs-keyword">let</span> make = (~value: <span class="hljs-module-identifier">Param</span>.t, _) =&gt; {
    <span class="hljs-operator">...</span>component,
    initialState: () =&gt; {value: value},
    reducer: ((), _state) =&gt; <span class="hljs-module-identifier">React</span>.<span class="hljs-constructor">NoUpdate</span>,
    render: ({state}) =&gt;
      &lt;div style={<span class="hljs-module-identifier">ReactDOMRe</span>.<span class="hljs-module-identifier">Style</span>.make(~fontSize=<span class="hljs-string">&quot;32px&quot;</span>, ())}&gt;
        <span class="hljs-comment">/* some markup */</span>
         {<span class="hljs-module-identifier">Param</span>.render(state.value)} &lt;/div&gt;,
  };
};
</code></pre>
<p>Now, in order to create a component, we just have to create a module with <code>Make</code>:</p>
<pre><code class="hljs language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">IntValue</span> =
  <span class="hljs-module-identifier">Make</span>({
    <span class="hljs-keyword">type</span> t = int;
    <span class="hljs-keyword">let</span> name = <span class="hljs-string">&quot;Int&quot;</span>;
    <span class="hljs-keyword">let</span> render = x =&gt; x<span class="hljs-operator">-&gt;</span>string_of_int<span class="hljs-operator">-&gt;</span><span class="hljs-module-identifier">React</span>.string;
  });

<span class="hljs-module-identifier">ReactDOMRe</span>.renderToElementWithId(&lt;<span class="hljs-module-identifier">IntValue</span> value=<span class="hljs-number">2</span> /&gt;, <span class="hljs-string">&quot;preview&quot;</span>);
</code></pre>
<p><a href="https://reasonml.github.io/en/try?rrjsx=true&amp;reason=LYewJgrgNgpgBAFwJ4Ad4AUCGAnTwAqq8AvHAN4BQciRiA3FXLAnAHZ4wBccAzgtgEtWAcwbVmcbDFZgY2bi2IA+OACUYmHiFbrMAYwQA6KfoQBRWMGkIGAXwYVQkWHACymANYk4ACiy5gbn88QjQASjhlckZkNF4ETARvMgA3TCgILjhg4EMEe0YJPRBgFG1rSLUNLR0NA2MYSD05AGESstZrHwAiABEYUG64AGph7Jw8Q3YrMLEmGBZgT28fAD80jKycvIAaOAB9CKjKampDc+LS8tYEHcZqIQEEAXSAZQSk7h8jlVT0zO4G0ytjup0kjQgzXkvm+e32fESMB+VU02l09QAciAAKooMCI0GnKQyORfMgIpK2H73U4AHjAAhS8SQsGIZHRCF6AHlXOpDO8WTBDEsvGsAGbaBCvAQALxgxG6AGYAEwoAAe3T23zCtiUNLBAHoAFS8ErwJbYDwQFBwI0G-VgsjbYmybA+ClCoFI2xwWkGhkpJSEgoFJzQeAASRuADV-iRGO5RSdTrF4Io4EIbDSJNNvN0owhunNxAtwSTsJU1ZEVGqALRKPiCET7EBi-aZ+u6GocwyNoSiRhUhwc7m8oUuuT4EAWAbWADqTwAFhGwD5aQXY5s4F7iMq4Aag3BuigpCkBDAAO7dWYUIA">Test it on the ReasonML playground</a></p>
</div><style data-emotion="rpcss jd8mf7">.rpcss-jd8mf7{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:spaceBetween;-ms-flex-pack:spaceBetween;-webkit-justify-content:spaceBetween;justify-content:spaceBetween;margin:20px 0;padding:20px;background-color:#FFF;border-radius:10px;box-shadow:0 15px 15px 5px rgba(0, 0, 0, 0.2),0 0 0 1px rgba(0, 0, 0, 0.1);}@media (max-width: 540px){.rpcss-jd8mf7{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-jd8mf7"><style data-emotion="rpcss 1p761yt">.rpcss-1p761yt{font-weight:900;font-size:18px;}</style><div class="rpcss-1p761yt">Liked this article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss mumwm1">.rpcss-mumwm1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}@media (max-width: 540px){.rpcss-mumwm1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-mumwm1"><style data-emotion="rpcss 14isay4">.rpcss-14isay4{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:900;}.rpcss-14isay4:active{opacity:0.5;}</style><a class="rpcss-14isay4" href="https://www.twitter.com/intent/tweet?text=Generating%20ReasonReact%20components%20with%20functors%20from%20%40bloodyowl%20https%3A%2F%2Fbloodyowl.io%2Fblog%2F2019-01-23-generating-reason-react-components-with-functors" target="_blank">→ Share it on Twitter</a><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss v8vdfl">.rpcss-v8vdfl{background-color:#ea4aaa;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:900;}.rpcss-v8vdfl:active{opacity:0.5;}</style><a class="rpcss-v8vdfl" href="https://github.com/sponsors/bloodyowl" rel="noopener" target="_blank">→ Sponsor me on GitHub</a></div></div><style data-emotion="rpcss sq4ju6">.rpcss-sq4ju6{padding:10px 0;}</style><div class="rpcss-sq4ju6"><div class="BeOpWidget"></div></div></div></div><style data-emotion="rpcss 1222rub">.rpcss-1222rub{background-color:#eee;color:#111;text-align:center;padding:20px;font-size:14px;}</style><div class="rpcss-1222rub"><div>Copyright 2021 - Matthias Le Brun</div><div><style data-emotion="rpcss 1tzeee1">.rpcss-1tzeee1{opacity:0.5;}</style><span class="rpcss-1tzeee1">Do you like the content? </span><style data-emotion="rpcss 1d5fxl9">.rpcss-1d5fxl9{color:#EC8AC5;}.rpcss-1d5fxl9:hover{color:#F9BDE1;}</style><a class="rpcss-1d5fxl9" href="https://github.com/sponsors/bloodyowl"> Sponsor me on GitHub</a></div></div></div></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"blog","v":{"k":"2019-01-23-generating-reason-react-components-with-functors","v":{"_0":{"TAG":0,"_0":{"slug":"2019-01-23-generating-reason-react-components-with-functors","filename":"2019-01-23-generating-reason-react-components-with-functors","title":"Generating ReasonReact components with functors","date":"Wed, 23 Jan 2019 00:00:00 GMT","draft":false,"meta":{"date":"2019-01-23T00:00:00.000Z","title":"Generating ReasonReact components with functors"},"body":"<p>In JavaScript, React components can either be function or classes. This makes it easy to create functions that return components (factories if you will).</p>\n<p>With ReasonReact though, if you want to use them with JSX, components need to be modules containing a <code>make</code> function, which is a much more static construct.</p>\n<p>Fortunately, Reason (through OCaml) has a great feature which is called functors. Think of it as a <strong>module function</strong>: it <strong>takes a module as parameter and returns a module</strong>.</p>\n<h2>The syntax</h2>\n<pre><code class=\"hljs language-reason\"><span class=\"hljs-keyword\">module</span> <span class=\"hljs-module-identifier\">Make</span> = (<span class=\"hljs-module-identifier\">Param</span>: <span class=\"hljs-module-identifier\">ParamType</span>) =&gt; {\n  <span class=\"hljs-comment\">/* contents of the module to return */</span>\n};\n</code></pre>\n<p>Let's define a <code>ParamType</code> first:</p>\n<pre><code class=\"hljs language-reason\"><span class=\"hljs-keyword\">module</span> <span class=\"hljs-keyword\">type</span> <span class=\"hljs-module-identifier\">ParamType</span> = {\n  <span class=\"hljs-keyword\">type</span> t;\n  <span class=\"hljs-keyword\">let</span> name: string;\n  <span class=\"hljs-keyword\">let</span> render: t =&gt; <span class=\"hljs-module-identifier\">React</span>.reactElement;\n};\n</code></pre>\n<p>Now, let's create our functor. The following example is very short and now really useful, its goal is simply to show the syntax. Where functors shine is with more complicated components, where you just want to write a simple configuration to generate a component (e.g. big virtualised, paginated lists, sortables etc.)</p>\n<pre><code class=\"hljs language-reason\"><span class=\"hljs-keyword\">module</span> <span class=\"hljs-module-identifier\">Make</span> = (<span class=\"hljs-module-identifier\">Param</span>: <span class=\"hljs-module-identifier\">ParamType</span>) =&gt; {\n  <span class=\"hljs-keyword\">type</span> state = {\n    value: <span class=\"hljs-module-identifier\">Param</span>.t,\n  };\n  <span class=\"hljs-keyword\">let</span> component = <span class=\"hljs-module-identifier\">React</span>.reducerComponent(<span class=\"hljs-string\">&quot;Demo&quot;</span> <span class=\"hljs-operator\">++</span> <span class=\"hljs-module-identifier\">Param</span>.name);\n  <span class=\"hljs-keyword\">let</span> make = (~value: <span class=\"hljs-module-identifier\">Param</span>.t, _) =&gt; {\n    <span class=\"hljs-operator\">...</span>component,\n    initialState: () =&gt; {value: value},\n    reducer: ((), _state) =&gt; <span class=\"hljs-module-identifier\">React</span>.<span class=\"hljs-constructor\">NoUpdate</span>,\n    render: ({state}) =&gt;\n      &lt;div style={<span class=\"hljs-module-identifier\">ReactDOMRe</span>.<span class=\"hljs-module-identifier\">Style</span>.make(~fontSize=<span class=\"hljs-string\">&quot;32px&quot;</span>, ())}&gt;\n        <span class=\"hljs-comment\">/* some markup */</span>\n         {<span class=\"hljs-module-identifier\">Param</span>.render(state.value)} &lt;/div&gt;,\n  };\n};\n</code></pre>\n<p>Now, in order to create a component, we just have to create a module with <code>Make</code>:</p>\n<pre><code class=\"hljs language-reason\"><span class=\"hljs-keyword\">module</span> <span class=\"hljs-module-identifier\">IntValue</span> =\n  <span class=\"hljs-module-identifier\">Make</span>({\n    <span class=\"hljs-keyword\">type</span> t = int;\n    <span class=\"hljs-keyword\">let</span> name = <span class=\"hljs-string\">&quot;Int&quot;</span>;\n    <span class=\"hljs-keyword\">let</span> render = x =&gt; x<span class=\"hljs-operator\">-&gt;</span>string_of_int<span class=\"hljs-operator\">-&gt;</span><span class=\"hljs-module-identifier\">React</span>.string;\n  });\n\n<span class=\"hljs-module-identifier\">ReactDOMRe</span>.renderToElementWithId(&lt;<span class=\"hljs-module-identifier\">IntValue</span> value=<span class=\"hljs-number\">2</span> /&gt;, <span class=\"hljs-string\">&quot;preview&quot;</span>);\n</code></pre>\n<p><a href=\"https://reasonml.github.io/en/try?rrjsx=true&amp;reason=LYewJgrgNgpgBAFwJ4Ad4AUCGAnTwAqq8AvHAN4BQciRiA3FXLAnAHZ4wBccAzgtgEtWAcwbVmcbDFZgY2bi2IA+OACUYmHiFbrMAYwQA6KfoQBRWMGkIGAXwYVQkWHACymANYk4ACiy5gbn88QjQASjhlckZkNF4ETARvMgA3TCgILjhg4EMEe0YJPRBgFG1rSLUNLR0NA2MYSD05AGESstZrHwAiABEYUG64AGph7Jw8Q3YrMLEmGBZgT28fAD80jKycvIAaOAB9CKjKampDc+LS8tYEHcZqIQEEAXSAZQSk7h8jlVT0zO4G0ytjup0kjQgzXkvm+e32fESMB+VU02l09QAciAAKooMCI0GnKQyORfMgIpK2H73U4AHjAAhS8SQsGIZHRCF6AHlXOpDO8WTBDEsvGsAGbaBCvAQALxgxG6AGYAEwoAAe3T23zCtiUNLBAHoAFS8ErwJbYDwQFBwI0G-VgsjbYmybA+ClCoFI2xwWkGhkpJSEgoFJzQeAASRuADV-iRGO5RSdTrF4Io4EIbDSJNNvN0owhunNxAtwSTsJU1ZEVGqALRKPiCET7EBi-aZ+u6GocwyNoSiRhUhwc7m8oUuuT4EAWAbWADqTwAFhGwD5aQXY5s4F7iMq4Aag3BuigpCkBDAAO7dWYUIA\">Test it on the ReasonML playground</a></p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.819d42822f6dd2902b3c.js"></script></head></html>